<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Let It Snow - Popup Playground</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Caveat:wght@400;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- CSS –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ popup-playground.js –¥–ª—è HMR -->
  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow-y: auto;
    }

    .playground-wrapper {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 40px 20px;
      background: linear-gradient(135deg, #0a1428 0%, #1a1a2e 50%, #16213e 100%);
      gap: 40px;
      flex-wrap: wrap;
    }

    .playground-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    .playground-label {
      font-family: 'Nunito', sans-serif;
      font-size: 18px;
      font-weight: 600;
      color: #4fc3f7;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
      padding: 10px 20px;
      background: rgba(79, 195, 247, 0.1);
      border-radius: 12px;
      border: 1px solid rgba(79, 195, 247, 0.3);
    }

    .popup-preview {
      border: 2px solid rgba(79, 195, 247, 0.3);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      overflow: hidden;
      background: transparent;
      max-height: 80vh;
      overflow-y: auto;
      width: 420px;
    }

    .popup-preview::-webkit-scrollbar {
      width: 8px;
    }

    .popup-preview::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.2);
    }

    .popup-preview::-webkit-scrollbar-thumb {
      background: rgba(79, 195, 247, 0.5);
      border-radius: 4px;
    }

    .popup-preview::-webkit-scrollbar-thumb:hover {
      background: rgba(79, 195, 247, 0.7);
    }

    .playground-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 1000;
    }

    .control-btn {
      padding: 12px 20px;
      background: linear-gradient(135deg, #4fc3f7, #1565c0);
      color: white;
      border: none;
      border-radius: 12px;
      font-family: 'Nunito', sans-serif;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(21, 101, 192, 0.4);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .control-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(21, 101, 192, 0.6);
    }

    .control-btn.reset {
      background: linear-gradient(135deg, #ff6b6b, #c62828);
    }

    .control-btn.reset:hover {
      box-shadow: 0 8px 20px rgba(198, 40, 40, 0.5);
    }

    .playground-info {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 16px 20px;
      background: rgba(30, 40, 70, 0.9);
      border-radius: 12px;
      border: 1px solid rgba(79, 195, 247, 0.3);
      font-family: 'Nunito', sans-serif;
      color: #bbdefb;
      font-size: 14px;
      max-width: 300px;
      backdrop-filter: blur(10px);
      z-index: 1;
    }

    .playground-info h3 {
      margin: 0 0 8px 0;
      color: #4fc3f7;
      font-size: 16px;
    }

    .playground-info p {
      margin: 0;
      line-height: 1.6;
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .popup-preview {
      animation: fadeInUp 0.6s ease-out;
    }

    /* –ú–µ–¥–∏–∞ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ */
    @media (max-width: 768px) {
      .playground-controls {
        position: static;
        flex-direction: row;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .playground-info {
        position: static;
        margin: 20px;
      }

      .playground-wrapper {
        padding: 20px 10px;
      }
    }
  </style>
</head>
<body>
  <div class="playground-controls">
    <button class="control-btn" id="toggleColors" data-i18n-title="tooltipAddColor">
      <i class="fas fa-palette"></i>
      –î–æ–±–∞–≤–∏—Ç—å —Ü–≤–µ—Ç
    </button>
    <button class="control-btn" id="toggleSymbols" data-i18n-title="tooltipAddSymbol">
      <i class="fas fa-star"></i>
      –î–æ–±–∞–≤–∏—Ç—å —Å–∏–º–≤–æ–ª
    </button>
    <button class="control-btn reset" id="resetPreview" data-i18n-title="resetDefaults">
      <i class="fas fa-redo"></i>
      –°–±—Ä–æ—Å
    </button>
  </div>

  <div class="playground-info">
    <h3><i class="fas fa-info-circle"></i> Popup Playground</h3>
    <p>
      –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è popup –º–µ–Ω—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Let It Snow. 
      –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ —Å–ø—Ä–∞–≤–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.
    </p>
    <p style="margin-top: 8px; font-size: 12px; color: #4fc3f7;">
      <i class="fas fa-bolt"></i> HMR –≤–∫–ª—é—á–µ–Ω - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ src/popup/* –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    </p>
  </div>

  <div class="playground-wrapper">
    <div class="playground-section">
      <div class="playground-label">
        <i class="fas fa-browser"></i> Popup Preview
      </div>
      <div class="popup-preview" id="popupPreview">
        <!-- Popup –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="container">
          <div class="header">
            <div class="snowflake-icon">‚ùÑÔ∏è</div>
            <h1><i class="fas fa-snowflake"></i> –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å–Ω–µ–≥–æ–ø–∞–¥ <i class="fas fa-snowflake"></i></h1>
            <p class="subtitle">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–æ–ª—à–µ–±–Ω—ã–π —Å–Ω–µ–≥–æ–ø–∞–¥ –Ω–∞ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</p>
          </div>

          <!-- Tabs Navigation -->
          <div class="tabs-navigation">
            <button class="tab-button active" data-tab="settings" data-i18n-title="tooltipTabSettings">
              <i class="fas fa-cog"></i>
              <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </button>
            <button class="tab-button" data-tab="about" data-i18n-title="tooltipTabAbout">
              <i class="fas fa-info-circle"></i>
              <span>–û —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏</span>
            </button>
          </div>

          <!-- Settings Tab Content -->
          <div class="tab-content active" id="settings-tab">
            <label class="setting-item toggle-item" data-i18n-title="tooltipAutoStart">
              <div class="setting-label">
                <i class="fas fa-power-off"></i>
                <span>–ê–≤—Ç–æ —Å—Ç–∞—Ä—Ç</span>
              </div>
              <input type="checkbox" id="autoStart" class="toggle-checkbox" checked>
              <div class="toggle-switch"></div>
            </label>
            
            <label class="setting-item">
              <div class="setting-label">
                <i class="fas fa-snowflake"></i>
                <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–Ω–µ–∂–∏–Ω–æ–∫</span>
                <span class="value-display" id="snowmaxValue">80</span>
              </div>
              <input type="range" id="snowmax" min="1" max="320" value="80" class="snow-slider" data-i18n-title="tooltipSnowCount">
            </label>

            <label class="setting-item">
              <div class="setting-label">
                <i class="fas fa-tachometer-alt"></i>
                <span>–°–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è</span>
                <span class="value-display" id="sinkspeedValue">0.4</span>
              </div>
              <input type="range" id="sinkspeed" min="0.1" max="3" step="0.1" value="0.4" class="snow-slider" data-i18n-title="tooltipFallSpeed">
            </label>

            <div class="setting-item">
              <div class="setting-label">
                <i class="fas fa-expand-alt"></i>
                <span>–†–∞–∑–º–µ—Ä —Å–Ω–µ–∂–∏–Ω–æ–∫</span>
              </div>
              <div class="range-dual">
                <div class="range-labels">
                  <span><i class="fas fa-snowflake small-icon"></i> –ú–∏–Ω: <span id="minsizeValue">15</span>px</span>
                  <span><i class="fas fa-snowflake large-icon"></i> –ú–∞–∫—Å: <span id="maxsizeValue">40</span>px</span>
                </div>
                <div class="dual-sliders">
                  <input type="range" id="snowminsize" min="1" max="100" value="15" class="snow-slider" data-i18n-title="tooltipSnowMinSize">
                  <input type="range" id="snowmaxsize" min="1" max="100" value="40" class="snow-slider" data-i18n-title="tooltipSnowMaxSize">
                </div>
              </div>
            </div>
          </div>

          <div class="settings-card">
            <div class="card-header">
              <i class="fas fa-palette"></i>
              <h3>–¶–≤–µ—Ç–∞ —Å–Ω–µ–∂–∏–Ω–æ–∫ <span class="hint">(–º–∏–Ω–∏–º—É–º 1)</span></h3>
            </div>
            <div id="colorsList" class="items-list">
              <div class="item">
                <input type="color" value="#ffffff" data-i18n-title="tooltipColorPicker">
                <input type="text" class="color-text" value="#ffffff" readonly data-i18n-title="tooltipColorHex">
                <button data-i18n-title="delete"><i class="fas fa-trash"></i></button>
              </div>
              <div class="item">
                <input type="color" value="#4fc3f7" data-i18n-title="tooltipColorPicker">
                <input type="text" class="color-text" value="#4fc3f7" readonly data-i18n-title="tooltipColorHex">
                <button data-i18n-title="delete"><i class="fas fa-trash"></i></button>
              </div>
            </div>
            <button id="addColor" class="add-button" data-i18n-title="tooltipAddColor">
              <i class="fas fa-plus-circle"></i>
              <span>–î–æ–±–∞–≤–∏—Ç—å —Ü–≤–µ—Ç</span>
            </button>
          </div>

          <div class="settings-card">
            <div class="card-header">
              <i class="fas fa-star"></i>
              <h3>–°–∏–º–≤–æ–ª—ã —Å–Ω–µ–∂–∏–Ω–æ–∫ <span class="hint">(–º–∏–Ω–∏–º—É–º 1)</span></h3>
            </div>
            <div id="symbolsList" class="items-list">
              <div class="item">
                <div class="symbol-preview">‚ùÑ</div>
                <input type="text" value="‚ùÑ" maxlength="3" data-i18n-title="tooltipSymbolInput">
                <button data-i18n-title="delete"><i class="fas fa-trash"></i></button>
              </div>
              <div class="item">
                <div class="symbol-preview">‚õÑ</div>
                <input type="text" value="‚õÑ" maxlength="3" data-i18n-title="tooltipSymbolInput">
                <button data-i18n-title="delete"><i class="fas fa-trash"></i></button>
              </div>
            </div>
            <button id="addSymbol" class="add-button" data-i18n-title="tooltipAddSymbol">
              <i class="fas fa-plus-circle"></i>
              <span>–î–æ–±–∞–≤–∏—Ç—å —Å–∏–º–≤–æ–ª</span>
            </button>
          </div>

          <div class="settings-card">
            <div class="card-header">
              <i class="fas fa-star"></i>
              <h3>–î–ª–∏–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è <span class="hint">(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</span></h3>
            </div>
            <p class="hint">–î–æ–±–∞–≤—å—Ç–µ –¥–ª–∏–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–∞–¥–∞—Ç—å –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤.</p>
            <div id="sentencesList" class="items-list">
              <div class="item sentence-item">
                <input type="text" class="sentence-text" value="–° –ù–æ–≤—ã–º –ì–æ–¥–æ–º!" data-i18n-title="tooltipSentenceInput">
                <button data-i18n-title="delete"><i class="fas fa-trash"></i></button>
              </div>
            </div>
            <button id="addSentence" class="add-button" data-i18n-title="tooltipAddSentence">
              <i class="fas fa-plus-circle"></i>
              <span>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</span>
            </button>
          </div>

          <div class="settings-card">
            <div class="card-header">
              <i class="fas fa-film"></i>
              <h3>GIF-–∞–Ω–∏–º–∞—Ü–∏–∏</h3>
            </div>
            <p class="hint">–î–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ GIF, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–∞–¥–∞—Ç—å –≤–º–µ—Å—Ç–µ —Å–æ —Å–Ω–µ–∂–∏–Ω–∫–∞–º–∏.</p>
            <label class="setting-item">
              <div class="setting-label">
                <i class="fas fa-layer-group"></i>
                <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ GIF</span>
                <span class="value-display" id="gifCountValue">0</span>
              </div>
              <input type="range" id="gifCount" min="0" max="80" value="0" class="snow-slider" data-i18n-title="tooltipGifCount">
            </label>
            <div id="gifsList" class="items-list">
            </div>
            <button id="addGif" class="add-button" data-i18n-title="tooltipAddGif">
              <i class="fas fa-plus-circle"></i>
              <span>–î–æ–±–∞–≤–∏—Ç—å GIF</span>
            </button>
          </div>

          <div class="footer">
            <button id="startSnow" class="big-btn" data-i18n-title="tooltipStartSnow">
              <i class="fas fa-play-circle"></i>
              <span>–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–µ–≥–æ–ø–∞–¥!</span>
            </button>
            <div class="decoration">
              <span class="decoration-icon">üéÑ</span>
              <span class="decoration-icon">ü¶å</span>
              <span class="decoration-icon">üéÖ</span>
              <span class="decoration-icon">üß¶</span>
            </div>
          </div>
          </div><!-- End Settings Tab -->

          <!-- About Tab Content -->
          <div class="tab-content" id="about-tab">
            <div class="settings-card about-card">
              <div class="card-header">
                <i class="fas fa-snowflake"></i>
                <h2>–û —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏</h2>
              </div>
              
              <div class="about-content">
                <div class="about-section">
                  <h3><i class="fas fa-code"></i> <span>–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å–Ω–µ–≥–æ–ø–∞–¥</span></h3>
                  <p class="version-info">
                    <span>–í–µ—Ä—Å–∏—è:</span> <span id="versionNumber">1.6.1</span>
                  </p>
                  <p class="description-text">
                    –ö—Ä–∞—Å–∏–≤–æ–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–æ–ª—à–µ–±–Ω–æ–≥–æ —Å–Ω–µ–≥–æ–ø–∞–¥–∞ –Ω–∞ –ª—é–±–æ–π –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–µ. 
                    –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ü–≤–µ—Ç–∞, —Å–∏–º–≤–æ–ª—ã, —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π!
                  </p>
                </div>

                <div class="about-section">
                  <h3><i class="fas fa-users"></i> <span>–ê–≤—Ç–æ—Ä—ã</span></h3>
                  <div class="authors-list">
                    <div class="author-item">
                      <i class="fas fa-user-circle author-icon"></i>
                      <div class="author-details">
                        <p class="author-name">Mirror Azure</p>
                        <a href="https://github.com/MirrorAzure" target="_blank" class="author-github">
                          <i class="fab fa-github"></i> @MirrorAzure
                        </a>
                      </div>
                    </div>
                    <div class="author-item">
                      <i class="fas fa-user-circle author-icon"></i>
                      <div class="author-details">
                        <p class="author-name">Pavel Kot</p>
                        <a href="https://github.com/PavelKotDRM" target="_blank" class="author-github">
                          <i class="fab fa-github"></i> @PavelKotDRM
                        </a>
                      </div>
                    </div>
                  </div>
                  <p class="author-info">
                    –°–æ–∑–¥–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
                  </p>
                </div>

                <div class="about-section">
                  <h3><i class="fas fa-code-branch"></i> <span>–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</span></h3>
                  <p class="repo-info">
                    –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ GitHub
                  </p>
                  <a href="https://github.com/MirrorAzure/Let-It-Snow" target="_blank" class="repo-link">
                    <i class="fab fa-github"></i>
                    <span>github.com/MirrorAzure/Let-It-Snow</span>
                    <i class="fas fa-external-link-alt"></i>
                  </a>
                </div>

                <div class="about-section">
                  <h3><i class="fas fa-gavel"></i> <span>–õ–∏—Ü–µ–Ω–∑–∏—è</span></h3>
                  <p class="license-info">
                    <span>MIT License</span>
                    <br>
                    <span class="license-year">¬© 2025 Mirror Azure</span>
                  </p>
                </div>

                <div class="about-section tech-stack">
                  <h3><i class="fas fa-tools"></i> <span>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</span></h3>
                  <div class="tech-badges">
                    <span class="tech-badge">
                      <i class="fas fa-cube"></i> WebGPU
                    </span>
                    <span class="tech-badge">
                      <i class="fab fa-js"></i> JavaScript
                    </span>
                    <span class="tech-badge">
                      <i class="fab fa-html5"></i> HTML5
                    </span>
                    <span class="tech-badge">
                      <i class="fab fa-css3-alt"></i> CSS3
                    </span>
                    <span class="tech-badge">
                      <i class="fas fa-canvas"></i> Canvas 2D
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div><!-- End About Tab -->

        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/playground/popup-playground.js"></script>
  <script>
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤
    document.addEventListener('DOMContentLoaded', () => {
      const tabButtons = document.querySelectorAll('.tab-button');
      const tabContents = document.querySelectorAll('.tab-content');

      tabButtons.forEach(button => {
        button.addEventListener('click', () => {
          const targetTab = button.dataset.tab;
          
          // –£–¥–∞–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
          tabButtons.forEach(btn => btn.classList.remove('active'));
          tabContents.forEach(content => content.classList.remove('active'));
          
          // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ
          button.classList.add('active');
          const targetContent = document.getElementById(`${targetTab}-tab`);
          if (targetContent) {
            targetContent.classList.add('active');
          }
        });
      });

      // –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ–ø–µ—Ä—å –≤ popup-playground.js —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HMR
      console.log('‚úì Popup Playground –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
      console.log('‚úì HMR –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –¥–ª—è src/popup/*');
    });
  </script>
</body>
</html>
